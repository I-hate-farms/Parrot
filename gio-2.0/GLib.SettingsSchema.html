<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>GLib.SettingsSchema &ndash; gio-2.0 &ndash; Vala Binding Reference</title>
    <link href="../style.css" rel="stylesheet" type="text/css"/><script src="../scripts.js" type="text/javascript">
    </script>
  </head>
  <body>
    <div class="site_header">GLib.SettingsSchema &ndash; gio-2.0 Reference Manual</div>
    <div class="site_body">
      <div class="site_navigation">
        <ul class="navi_main">
          <li class="package_index"><a href="../index.html">Packages</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="package"><a href="index.htm">gio-2.0</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="namespace"><a href="GLib.html">GLib</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="class">SettingsSchema</li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="method"><a href="GLib.SettingsSchema.@ref.html">@ref</a></li>
          <li class="method"><a href="GLib.SettingsSchema.get_id.html">get_id</a></li>
          <li class="method"><a href="GLib.SettingsSchema.get_key.html">get_key</a></li>
          <li class="method"><a href="GLib.SettingsSchema.get_path.html">get_path</a></li>
          <li class="method"><a href="GLib.SettingsSchema.has_key.html">has_key</a></li>
          <li class="method"><a href="GLib.SettingsSchema.list_children.html">list_children</a></li>
          <li class="method"><a href="GLib.SettingsSchema.unref.html">unref</a></li>
        </ul>
      </div>
      <div class="site_content">
        <h1 class="main_title">SettingsSchema</h1>
        <hr class="main_hr"/>
        <h2 class="main_title">Object Hierarchy:</h2>
        <img class="main_diagram" usemap="#GLib.SettingsSchema" alt="Object hierarchy for SettingsSchema" src="img/GLib.SettingsSchema.png"/>

      <map id="GLib.SettingsSchema" name="GLib.SettingsSchema">
<area shape="rect" id="node1" href="GLib.SettingsSchema.html" title="GLib.SettingsSchema" alt="" coords="5,5,187,53"/>
</map>

        <h2 class="main_title">Description:</h2>
        <div class="main_code_definition">[ <span class="main_type">Compact</span> ]<br/><span class="main_keyword">public</span> <span class="main_keyword">class</span> <b><span class="class">SettingsSchema</span></b>
        </div>
        <div class="description">
          <p>The <a href="GLib.SettingsSchemaSource.html" class="class">SettingsSchemaSource</a> and <span class="class">SettingsSchema</span> APIs 
            provide a mechanism for advanced control over the loading of schemas and a mechanism for introspecting their content.</p>
          <p>Plugin loading systems that wish to provide plugins a way to access settings face the problem of how to make the schemas for these 
            settings visible to GSettings. Typically, a plugin will want to ship the schema along with itself and it won't be installed into the 
            standard system directories for schemas.</p>
          <p><a href="GLib.SettingsSchemaSource.html" class="class">SettingsSchemaSource</a> provides a mechanism for dealing with this by allowing 
            the creation of a new 'schema source' from which schemas can be acquired. This schema source can then become part of the metadata 
            associated with the plugin and queried whenever the plugin requires access to some settings.</p>
          <p>Consider the following example:</p>
          <p><pre class="main_source">typedef struct<br/>{<br/>   ...<br/>   GSettingsSchemaSource *schema_source;<br/>   ...<br/>} Plugin;<br/><br/>Plugin *<br/>initialise_plugin (const gchar *dir)<br/>{<br/>  Plugin *plugin;<br/><br/>  ...<br/><br/>  plugin-&gt;schema_source =<br/>    g_settings_new_schema_source_from_directory (dir,<br/>      g_settings_schema_source_get_default (), FALSE, NULL);<br/><br/>  ...<br/><br/>  return plugin;<br/>}<br/><br/>...<br/><br/>GSettings *<br/>plugin_get_settings (Plugin      *plugin,<br/>                     const gchar *schema_id)<br/>{<br/>  GSettingsSchema *schema;<br/><br/>  if (schema_id == NULL)<br/>    schema_id = plugin-&gt;identifier;<br/><br/>  schema = g_settings_schema_source_lookup (plugin-&gt;schema_source,<br/>                                            schema_id, FALSE);<br/><br/>  if (schema == NULL)<br/>    {<br/>      ... disable the plugin or abort, etc ...<br/>    }<br/><br/>  return g_settings_new_full (schema, NULL, NULL);<br/>}</pre>
          </p>
          <p>The code above shows how hooks should be added to the code that initialises (or enables) the plugin to create the schema source and how 
            an API can be added to the plugin system to provide a convenient way for the plugin to access its settings, using the schemas that it 
            ships.</p>
          <p>From the standpoint of the plugin, it would need to ensure that it ships a gschemas.compiled file as part of itself, and then simply do 
            the following:</p>
          <p><pre class="main_source">{<br/>  GSettings *settings;<br/>  gint some_value;<br/><br/>  settings = plugin_get_settings (self, NULL);<br/>  some_value = g_settings_get_int (settings, "some-value");<br/>  ...<br/>}</pre>
          </p>
          <p>It's also possible that the plugin system expects the schema source files (ie: .gschema.xml files) instead of a gschemas.compiled file. 
            In that case, the plugin loading system must compile the schemas for itself before attempting to create the settings source.</p>
        </div><br/>
        <div class="namespace_note"><b>Namespace:</b> <a href="GLib.html">GLib</a>
        </div>
        <div class="package_note"><b>Package:</b> <a href="index.htm">gio-2.0</a>
        </div>
        <h2 class="main_title">Content:</h2>
        <h3 class="main_title">Methods:</h3>
        <ul class="navi_inline">
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">unowned</span> <span class="main_basic_type"><a href="../glib-2.0/string.html" class="class">string</a></span> <b><a href="GLib.SettingsSchema.get_id.html" class="method">get_id</a></b> ()
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Get the ID of <span class="main_keyword">this</span>.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_type"><a href="GLib.SettingsSchemaKey.html" class="class">SettingsSchemaKey</a></span> <b><a href="GLib.SettingsSchema.get_key.html" class="method">get_key</a></b> (<span class="main_basic_type"><a href="../glib-2.0/string.html" class="class">string</a></span> name)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Gets the key named <code>name</code> from <span class="main_keyword">
                  this</span>.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">unowned</span> <span class="main_basic_type"><a href="../glib-2.0/string.html" class="class">string</a></span> <b><a href="GLib.SettingsSchema.get_path.html" class="method">get_path</a></b> ()
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Gets the path associated with <span class="main_keyword">this</span>, 
                or <span class="main_optional_parameter">null</span>.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_basic_type"><a href="../glib-2.0/bool.html" class="struct">bool</a></span> <b><a href="GLib.SettingsSchema.has_key.html" class="method">has_key</a></b> (<span class="main_basic_type"><a href="../glib-2.0/string.html" class="class">string</a></span> name)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Checks if <span class="main_keyword">this</span> has a key named 
                <code>name</code>.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_basic_type"><a href="../glib-2.0/string.html" class="class">string</a></span>[] <b><a href="GLib.SettingsSchema.list_children.html" class="method">list_children</a></b> ()
            </span>
            <div class="leaf_brief_description">
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_type"><span class="class">SettingsSchema</span></span> <b><a href="GLib.SettingsSchema.@ref.html" class="method">@ref</a></b> ()
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Increase the reference count of <span class="main_keyword">this</span>
                , returning a new reference.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">void</span> <b><a href="GLib.SettingsSchema.unref.html" class="method">unref</a></b> ()
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Decrease the reference count of <span class="main_keyword">this</span>
                , possibly freeing it.</span>
            </div></li>
        </ul>
      </div>
    </div><br/>
    <div class="site_footer">Generated by <a href="http://www.valadoc.org/">Valadoc</a>
    </div>
  </body>
</html>