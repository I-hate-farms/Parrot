<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>GLib.Socket.receive_message &ndash; gio-2.0 &ndash; Vala Binding Reference</title>
    <link href="../style.css" rel="stylesheet" type="text/css"/><script src="../scripts.js" type="text/javascript">
    </script>
  </head>
  <body>
    <div class="site_header">GLib.Socket.receive_message &ndash; gio-2.0 Reference Manual</div>
    <div class="site_body">
      <div class="site_navigation">
        <ul class="navi_main">
          <li class="package_index"><a href="../index.html">Packages</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="package"><a href="index.htm">gio-2.0</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="namespace"><a href="GLib.html">GLib</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="class"><a href="GLib.Socket.html">Socket</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="property"><a href="GLib.Socket.blocking.html">blocking</a></li>
          <li class="property"><a href="GLib.Socket.broadcast.html">broadcast</a></li>
          <li class="property"><a href="GLib.Socket.family.html">family</a></li>
          <li class="property"><a href="GLib.Socket.fd.html">fd</a></li>
          <li class="property"><a href="GLib.Socket.keepalive.html">keepalive</a></li>
          <li class="property"><a href="GLib.Socket.listen_backlog.html">listen_backlog</a></li>
          <li class="property"><a href="GLib.Socket.local_address.html">local_address</a></li>
          <li class="property"><a href="GLib.Socket.multicast_loopback.html">multicast_loopback</a></li>
          <li class="property"><a href="GLib.Socket.multicast_ttl.html">multicast_ttl</a></li>
          <li class="property"><a href="GLib.Socket.protocol.html">protocol</a></li>
          <li class="property"><a href="GLib.Socket.remote_address.html">remote_address</a></li>
          <li class="property"><a href="GLib.Socket.timeout.html">timeout</a></li>
          <li class="property"><a href="GLib.Socket.ttl.html">ttl</a></li>
          <li class="property"><a href="GLib.Socket.type.html">type</a></li>
          <li class="creation_method"><a href="GLib.Socket.Socket.html">Socket</a></li>
          <li class="creation_method"><a href="GLib.Socket.Socket.from_fd.html">Socket.from_fd</a></li>
          <li class="method"><a href="GLib.Socket.accept.html">accept</a></li>
          <li class="method"><a href="GLib.Socket.bind.html">bind</a></li>
          <li class="method"><a href="GLib.Socket.check_connect_result.html">check_connect_result</a></li>
          <li class="method"><a href="GLib.Socket.close.html">close</a></li>
          <li class="method"><a href="GLib.Socket.condition_check.html">condition_check</a></li>
          <li class="method"><a href="GLib.Socket.condition_timed_wait.html">condition_timed_wait</a></li>
          <li class="method"><a href="GLib.Socket.condition_wait.html">condition_wait</a></li>
          <li class="method"><a href="GLib.Socket.connect.html">connect</a></li>
          <li class="method"><a href="GLib.Socket.create_source.html">create_source</a></li>
          <li class="method"><a href="GLib.Socket.get_available_bytes.html">get_available_bytes</a></li>
          <li class="method"><a href="GLib.Socket.get_blocking.html">get_blocking</a></li>
          <li class="method"><a href="GLib.Socket.get_broadcast.html">get_broadcast</a></li>
          <li class="method"><a href="GLib.Socket.get_credentials.html">get_credentials</a></li>
          <li class="method"><a href="GLib.Socket.get_family.html">get_family</a></li>
          <li class="method"><a href="GLib.Socket.get_fd.html">get_fd</a></li>
          <li class="method"><a href="GLib.Socket.get_keepalive.html">get_keepalive</a></li>
          <li class="method"><a href="GLib.Socket.get_listen_backlog.html">get_listen_backlog</a></li>
          <li class="method"><a href="GLib.Socket.get_local_address.html">get_local_address</a></li>
          <li class="method"><a href="GLib.Socket.get_multicast_loopback.html">get_multicast_loopback</a></li>
          <li class="method"><a href="GLib.Socket.get_multicast_ttl.html">get_multicast_ttl</a></li>
          <li class="method"><a href="GLib.Socket.get_option.html">get_option</a></li>
          <li class="method"><a href="GLib.Socket.get_protocol.html">get_protocol</a></li>
          <li class="method"><a href="GLib.Socket.get_remote_address.html">get_remote_address</a></li>
          <li class="method"><a href="GLib.Socket.get_socket_type.html">get_socket_type</a></li>
          <li class="method"><a href="GLib.Socket.get_timeout.html">get_timeout</a></li>
          <li class="method"><a href="GLib.Socket.get_ttl.html">get_ttl</a></li>
          <li class="method"><a href="GLib.Socket.is_closed.html">is_closed</a></li>
          <li class="method"><a href="GLib.Socket.is_connected.html">is_connected</a></li>
          <li class="method"><a href="GLib.Socket.join_multicast_group.html">join_multicast_group</a></li>
          <li class="method"><a href="GLib.Socket.leave_multicast_group.html">leave_multicast_group</a></li>
          <li class="method"><a href="GLib.Socket.listen.html">listen</a></li>
          <li class="method"><a href="GLib.Socket.receive.html">receive</a></li>
          <li class="method"><a href="GLib.Socket.receive_from.html">receive_from</a></li>
          <li class="method">receive_message</li>
          <li class="method"><a href="GLib.Socket.receive_with_blocking.html">receive_with_blocking</a></li>
          <li class="method"><a href="GLib.Socket.send.html">send</a></li>
          <li class="method"><a href="GLib.Socket.send_message.html">send_message</a></li>
          <li class="method"><a href="GLib.Socket.send_messages.html">send_messages</a></li>
          <li class="method"><a href="GLib.Socket.send_to.html">send_to</a></li>
          <li class="method"><a href="GLib.Socket.send_with_blocking.html">send_with_blocking</a></li>
          <li class="method"><a href="GLib.Socket.set_blocking.html">set_blocking</a></li>
          <li class="method"><a href="GLib.Socket.set_broadcast.html">set_broadcast</a></li>
          <li class="method"><a href="GLib.Socket.set_keepalive.html">set_keepalive</a></li>
          <li class="method"><a href="GLib.Socket.set_listen_backlog.html">set_listen_backlog</a></li>
          <li class="method"><a href="GLib.Socket.set_multicast_loopback.html">set_multicast_loopback</a></li>
          <li class="method"><a href="GLib.Socket.set_multicast_ttl.html">set_multicast_ttl</a></li>
          <li class="method"><a href="GLib.Socket.set_option.html">set_option</a></li>
          <li class="method"><a href="GLib.Socket.set_timeout.html">set_timeout</a></li>
          <li class="method"><a href="GLib.Socket.set_ttl.html">set_ttl</a></li>
          <li class="method"><a href="GLib.Socket.shutdown.html">shutdown</a></li>
          <li class="method"><a href="GLib.Socket.speaks_ipv4.html">speaks_ipv4</a></li>
        </ul>
      </div>
      <div class="site_content">
        <h1 class="main_title">receive_message</h1>
        <hr class="main_hr"/>
        <h2 class="main_title">Description:</h2>
        <div class="main_code_definition"><span class="main_keyword">public</span> <span class="main_basic_type"><a href="../glib-2.0/ssize_t.html" class="struct">ssize_t</a></span> <b><span class="method">receive_message</span></b> (<span class="main_keyword">out</span> <span class="main_type"><a href="GLib.SocketAddress.html" class="abstract_class">SocketAddress</a></span> address, <span class="main_type"><a href="GLib.InputVector.html" class="struct">InputVector</a></span>[] vectors, <span class="main_type"><a href="GLib.SocketControlMessage.html" class="abstract_class">SocketControlMessage</a></span>[]? messages, <span class="main_basic_type"><a href="../glib-2.0/int.html" class="struct">int</a></span> flags, <span class="main_type"><a href="GLib.Cancellable.html" class="class">Cancellable</a></span>? cancellable = <span class="main_optional_parameter">null</span>) <span class="main_keyword">throws</span> <span class="main_type"><a href="../glib-2.0/GLib.Error.html" class="class">Error</a></span>
        </div>
        <div class="description">
          <p>Receive data from a socket.</p>
          <p> This is the most complicated and fully-featured version of this call. For easier use, see 
            <a href="GLib.Socket.receive.html" class="method">receive</a> and <a href="GLib.Socket.receive_from.html" class="method">receive_from</a>.
          </p>
          <p>If <code>address</code> is non-<span class="main_optional_parameter">null</span> then <code>address</code> will be set equal to the 
            source address of the received packet. <code>address</code> is owned by the caller.</p>
          <p><code>vector</code> must point to an array of <a href="GLib.InputVector.html" class="struct">InputVector</a> structs and <code>
              vectors.length</code> must be the length of this array. These structs describe the buffers that received data will be scattered into. If
             <code>vectors.length</code> is -1, then <code>vectors</code> is assumed to be terminated by a 
            <a href="GLib.InputVector.html" class="struct">InputVector</a> with a <span class="main_optional_parameter">null</span> buffer pointer.
          </p>
          <p>As a special case, if <code>vectors.length</code> is 0 (in which case, <code>vectors</code> may of course be 
            <span class="main_optional_parameter">null</span>), then a single byte is received and discarded. This is to facilitate the common 
            practice of sending a single '\0' byte for the purposes of transferring ancillary data.</p>
          <p><code>messages</code>, if non-<span class="main_optional_parameter">null</span>, will be set to point to a newly-allocated array of 
            <a href="GLib.SocketControlMessage.html" class="abstract_class">SocketControlMessage</a> instances or 
            <span class="main_optional_parameter">null</span> if no such messages was received. These correspond to the control messages received from
             the kernel, one <a href="GLib.SocketControlMessage.html" class="abstract_class">SocketControlMessage</a> per message from the kernel. 
            This array is <span class="main_optional_parameter">null</span>-terminated and must be freed by the caller using 
            <a href="../glib-2.0/GLib.g_free.html" class="field">g_free</a> after calling 
            <a href="../gobject-2.0/GLib.Object.unref.html" class="method">unref</a> on each element. If <code>messages</code> is 
            <span class="main_optional_parameter">null</span>, any control messages received will be discarded.</p>
          <p><code>messages.length</code>, if non-<span class="main_optional_parameter">null</span>, will be set to the number of control messages 
            received.</p>
          <p>If both <code>messages</code> and <code>messages.length</code> are non-<span class="main_optional_parameter">null</span>, then <code>
              messages.length</code> gives the number of <a href="GLib.SocketControlMessage.html" class="abstract_class">SocketControlMessage</a> 
            instances in <code>messages</code> (ie: not including the <span class="main_optional_parameter">null</span> terminator).</p>
          <p><code>flags</code> is an in/out parameter. The commonly available arguments for this are available in the 
            <a href="GLib.SocketMsgFlags.html" class="enum">SocketMsgFlags</a> enum, but the values there are the same as the system values, and the 
            flags are passed in as-is, so you can pass in system-specific flags too (and <span class="method">receive_message</span> may pass 
            system-specific flags out).</p>
          <p>As with <a href="GLib.Socket.receive.html" class="method">receive</a>, data may be discarded if <span class="main_keyword">this</span> is
             <span class="main_optional_parameter">g_socket_type_datagram</span> or <span class="main_optional_parameter">g_socket_type_seqpacket
            </span> and you do not provide enough buffer space to read a complete message. You can pass <span class="main_optional_parameter">
              g_socket_msg_peek</span> in <code>flags</code> to peek at the current message without removing it from the receive queue, but there is 
            no portable way to find out the length of the message other than by reading it into a sufficiently-large buffer.</p>
          <p>If the socket is in blocking mode the call will block until there is some data to receive, the connection is closed, or there is an 
            error. If there is no data available and the socket is in non-blocking mode, a <span class="main_optional_parameter">
              g_io_error_would_block</span> error will be returned. To be notified when data is available, wait for the 
            <span class="main_optional_parameter">g_io_in</span> condition.</p>
          <p>On error -1 is returned and <span class="main_keyword">throws</span> is set accordingly.</p>
          <h2 class="main_title">Parameters:</h2>
          <table class="main_parameter_table">
            <tr>
              <td class="main_parameter_table_name">this</td>
              <td>
                <p>a <a href="GLib.Socket.html" class="class">Socket</a></p>
              </td>
            </tr>
            <tr>
              <td class="main_parameter_table_name">address</td>
              <td>
                <p>a pointer to a <a href="GLib.SocketAddress.html" class="abstract_class">SocketAddress</a>  pointer, or 
                  <span class="main_optional_parameter">null</span></p>
              </td>
            </tr>
            <tr>
              <td class="main_parameter_table_name">vectors</td>
              <td>
                <p>an array of <a href="GLib.InputVector.html" class="struct">InputVector</a> structs</p>
              </td>
            </tr>
            <tr>
              <td class="main_parameter_table_name">messages</td>
              <td>
                <p>a pointer which  may be filled with an array of <a href="GLib.SocketControlMessage.html" class="abstract_class">
                    SocketControlMessage</a>s, or <span class="main_optional_parameter">null</span></p>
              </td>
            </tr>
            <tr>
              <td class="main_parameter_table_name">flags</td>
              <td>
                <p>a pointer to an int containing <a href="GLib.SocketMsgFlags.html" class="enum">SocketMsgFlags</a> flags</p>
              </td>
            </tr>
            <tr>
              <td class="main_parameter_table_name">cancellable</td>
              <td>
                <p>a <span class="main_optional_parameter">gcancellable</span> or <span class="main_optional_parameter">null</span></p>
              </td>
            </tr>
            <tr class="main_parameter_table_unknown_parameter">
              <td class="main_parameter_table_name">num_messages</td>
              <td>
                <p>a pointer which will be filled with the number of  elements in <code>messages</code>, or <span class="main_optional_parameter">null
                  </span></p>
              </td>
            </tr>
            <tr class="main_parameter_table_unknown_parameter">
              <td class="main_parameter_table_name">num_vectors</td>
              <td>
                <p>the number of elements in <code>vectors</code>, or -1</p>
              </td>
            </tr>
          </table>
          <h2 class="main_title">Returns:</h2>
          <table class="main_parameter_table">
            <tr>
              <td>
                <p>Number of bytes read, or 0 if the connection was closed by the peer, or -1 on error</p>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div><br/>
    <div class="site_footer">Generated by <a href="http://www.valadoc.org/">Valadoc</a>
    </div>
  </body>
</html>