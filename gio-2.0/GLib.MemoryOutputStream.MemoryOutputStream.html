<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>GLib.MemoryOutputStream.MemoryOutputStream &ndash; gio-2.0 &ndash; Vala Binding Reference</title>
    <link href="../style.css" rel="stylesheet" type="text/css"/><script src="../scripts.js" type="text/javascript">
    </script>
  </head>
  <body>
    <div class="site_header">GLib.MemoryOutputStream.MemoryOutputStream &ndash; gio-2.0 Reference Manual</div>
    <div class="site_body">
      <div class="site_navigation">
        <ul class="navi_main">
          <li class="package_index"><a href="../index.html">Packages</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="package"><a href="index.htm">gio-2.0</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="namespace"><a href="GLib.html">GLib</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="class"><a href="GLib.MemoryOutputStream.html">MemoryOutputStream</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="property"><a href="GLib.MemoryOutputStream.data.html">data</a></li>
          <li class="property"><a href="GLib.MemoryOutputStream.data_size.html">data_size</a></li>
          <li class="property"><a href="GLib.MemoryOutputStream.destroy_function.html">destroy_function</a></li>
          <li class="property"><a href="GLib.MemoryOutputStream.realloc_function.html">realloc_function</a></li>
          <li class="property"><a href="GLib.MemoryOutputStream.size.html">size</a></li>
          <li class="creation_method">MemoryOutputStream</li>
          <li class="creation_method"><a href="GLib.MemoryOutputStream.MemoryOutputStream.resizable.html">MemoryOutputStream.resizable</a></li>
          <li class="method"><a href="GLib.MemoryOutputStream.get_data.html">get_data</a></li>
          <li class="method"><a href="GLib.MemoryOutputStream.get_data_size.html">get_data_size</a></li>
          <li class="method"><a href="GLib.MemoryOutputStream.get_size.html">get_size</a></li>
          <li class="method"><a href="GLib.MemoryOutputStream.steal_as_bytes.html">steal_as_bytes</a></li>
          <li class="method"><a href="GLib.MemoryOutputStream.steal_data.html">steal_data</a></li>
        </ul>
      </div>
      <div class="site_content">
        <h1 class="main_title">MemoryOutputStream</h1>
        <hr class="main_hr"/>
        <h2 class="main_title">Description:</h2>
        <div class="main_code_definition"><span class="main_keyword">public</span> <b><span class="creation_method">MemoryOutputStream</span></b> (<span class="main_keyword">owned</span> <span class="main_basic_type"><a href="../glib-2.0/uint8.html" class="struct">uint8</a></span>[]? data, <span class="main_type"><a href="GLib.ReallocFunc.html" class="delegate">ReallocFunc</a></span>? realloc_function, <span class="main_type"><a href="../glib-2.0/GLib.DestroyNotify.html" class="delegate">DestroyNotify</a></span>? destroy_function)
        </div>
        <div class="description">
          <p>Creates a new <a href="GLib.MemoryOutputStream.html" class="class">MemoryOutputStream</a>.</p>
          <p>In most cases this is not the function you want. See 
            <a href="GLib.MemoryOutputStream.MemoryOutputStream.resizable.html" class="creation_method">MemoryOutputStream.resizable</a> instead.</p>
          <p>If <code>data</code> is non-<span class="main_optional_parameter">null</span>, the stream will use that for its internal storage.</p>
          <p>If <code>realloc_fn</code> is non-<span class="main_optional_parameter">null</span>, it will be used for resizing the internal storage 
            when necessary and the stream will be considered resizable. In that case, the stream will start out being (conceptually) empty. <code>size
            </code> is used only as a hint for how big <code>data</code> is. Specifically, seeking to the end of a newly-created stream will seek to 
            zero, not <code>size</code>. Seeking past the end of the stream and then writing will introduce a zero-filled gap.</p>
          <p>If <code>realloc_fn</code> is <span class="main_optional_parameter">null</span> then the stream is fixed-sized. Seeking to the end will 
            seek to <code>size</code> exactly. Writing past the end will give an 'out of space' error. Attempting to seek past the end will fail. 
            Unlike the resizable case, seeking to an offset within the stream and writing will preserve the bytes passed in as <code>data</code> 
            before that point and will return them as part of <a href="GLib.MemoryOutputStream.steal_data.html" class="method">steal_data</a>. If you 
            intend to seek you should probably therefore ensure that <code>data</code> is properly initialised.</p>
          <p>It is probably only meaningful to provide <code>data</code> and <code>size</code> in the case that you want a fixed-sized stream. Put 
            another way: if <code>realloc_fn</code> is non-<span class="main_optional_parameter">null</span> then it makes most sense to give <code>
              data</code> as <span class="main_optional_parameter">null</span> and <code>size</code> as 0 (allowing 
            <a href="GLib.MemoryOutputStream.html" class="class">MemoryOutputStream</a> to do the initial allocation for itself).</p>
          <p><pre class="main_source">// a stream that can grow<br/>stream = g_memory_output_stream_new (NULL, 0, realloc, free);<br/><br/>// another stream that can grow<br/>stream2 = g_memory_output_stream_new (NULL, 0, g_realloc, g_free);<br/><br/>// a fixed-size stream<br/>data = malloc (200);<br/>stream3 = g_memory_output_stream_new (data, 200, NULL, free);</pre>
          </p>
          <h2 class="main_title">Parameters:</h2>
          <table class="main_parameter_table">
            <tr>
              <td class="main_parameter_table_name">data</td>
              <td>
                <p>pointer to a chunk of memory to use, or <span class="main_optional_parameter">null</span></p>
              </td>
            </tr>
            <tr>
              <td class="main_parameter_table_name">realloc_function</td>
              <td>
                <p>a function with <code>realloc</code> semantics (like <a href="../glib-2.0/GLib.realloc.html" class="method">realloc</a>)  to be 
                  called when <code>data</code> needs to be grown, or <span class="main_optional_parameter">null</span></p>
              </td>
            </tr>
            <tr class="main_parameter_table_unknown_parameter">
              <td class="main_parameter_table_name">destroy_function</td>
              <td>
                <p>a function to be called on <code>data</code> when the stream is  finalized, or <span class="main_optional_parameter">null</span>
                </p>
              </td>
            </tr>
            <tr class="main_parameter_table_unknown_parameter">
              <td class="main_parameter_table_name">size</td>
              <td>
                <p>the size of <code>data</code></p>
              </td>
            </tr>
          </table>
          <h2 class="main_title">Returns:</h2>
          <table class="main_parameter_table">
            <tr>
              <td>
                <p>A newly created <a href="GLib.MemoryOutputStream.html" class="class">MemoryOutputStream</a> object.</p>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div><br/>
    <div class="site_footer">Generated by <a href="http://www.valadoc.org/">Valadoc</a>
    </div>
  </body>
</html>